

<!doctype html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>AviSynth FAQ - Recognizing and processing different types of content &#8212; AviSynth+ 3.4 documentation</title>
    <link rel="stylesheet" href="../../_static/bizstyle.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/bizstyle.js"></script>
    <link rel="shortcut icon" href="../../_static/AvsiDoc.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="AviSynth FAQ - Opening scripts in encoder and player applications" href="faq_frameserving.html" />
    <link rel="prev" title="AviSynth FAQ - Some common error messages" href="faq_common_errors.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <!--[if lt IE 9]>
    <script type="text/javascript" src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="faq_frameserving.html" title="AviSynth FAQ - Opening scripts in encoder and player applications"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="faq_common_errors.html" title="AviSynth FAQ - Some common error messages"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">AviSynth+ 3.4 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" accesskey="U">Invisible Tree</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/DocIcon-Large.svg" alt="Logo"/>
            </a></p>
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">AviSynth FAQ - Recognizing and processing different types of content</a><ul>
<li><a class="reference internal" href="#the-video-and-audio-in-my-final-encoding-is-out-of-sync-what-should-i-do">The video and audio in my final encoding is out of sync, what should I do?</a></li>
<li><a class="reference internal" href="#how-do-i-recognize-progressive-interlaced-telecined-hybrid-and-blended-content">How do I recognize progressive, interlaced, telecined, hybrid and blended content?</a></li>
<li><a class="reference internal" href="#how-do-i-process-interlaced-content">How do I process interlaced content?</a></li>
<li><a class="reference internal" href="#how-do-i-process-telecined-content">How do I process telecined content?</a></li>
<li><a class="reference internal" href="#how-do-i-process-hybrid-content">How do I process hybrid content?</a></li>
<li><a class="reference internal" href="#what-is-variable-framerate-video">What is variable framerate video?</a></li>
<li><a class="reference internal" href="#how-do-i-import-variable-framerate-video-into-avisynth-and-how-do-i-process-it">How do I import variable framerate video into AviSynth and how do I process it?</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="faq_common_errors.html"
                        title="previous chapter">AviSynth FAQ - Some common error messages</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="faq_frameserving.html"
                        title="next chapter">AviSynth FAQ - Opening scripts in encoder and player applications</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/avisynthdoc/faq/faq_different_types_content.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="avisynth-faq-recognizing-and-processing-different-types-of-content">
<h1><a class="toc-backref" href="#id1">AviSynth FAQ - Recognizing and processing different types of content</a><a class="headerlink" href="#avisynth-faq-recognizing-and-processing-different-types-of-content" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
</div>
<div class="contents topic" id="table-of-contents">
<p class="topic-title first">Table of contents</p>
<ul class="simple">
<li><a class="reference internal" href="#avisynth-faq-recognizing-and-processing-different-types-of-content" id="id1">AviSynth FAQ - Recognizing and processing different types of content</a><ul>
<li><a class="reference internal" href="#the-video-and-audio-in-my-final-encoding-is-out-of-sync-what-should-i-do" id="id2">The video and audio in my final encoding is out of sync, what should I do?</a></li>
<li><a class="reference internal" href="#how-do-i-recognize-progressive-interlaced-telecined-hybrid-and-blended-content" id="id3">How do I recognize progressive, interlaced, telecined, hybrid and blended content?</a></li>
<li><a class="reference internal" href="#how-do-i-process-interlaced-content" id="id4">How do I process interlaced content?</a></li>
<li><a class="reference internal" href="#how-do-i-process-telecined-content" id="id5">How do I process telecined content?</a></li>
<li><a class="reference internal" href="#how-do-i-process-hybrid-content" id="id6">How do I process hybrid content?</a></li>
<li><a class="reference internal" href="#what-is-variable-framerate-video" id="id7">What is variable framerate video?</a></li>
<li><a class="reference internal" href="#how-do-i-import-variable-framerate-video-into-avisynth-and-how-do-i-process-it" id="id8">How do I import variable framerate video into AviSynth and how do I process it?</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="the-video-and-audio-in-my-final-encoding-is-out-of-sync-what-should-i-do">
<h2><a class="toc-backref" href="#id2">The video and audio in my final encoding is out of sync, what should I do?</a><a class="headerlink" href="#the-video-and-audio-in-my-final-encoding-is-out-of-sync-what-should-i-do" title="Permalink to this headline">¶</a></h2>
<p>Assuming that you processed your video and or audio with AviSynth, there can
be several reasons why your final encoding is not in sync (synchronization).
The most common ones are:</p>
<ol class="arabic simple">
<li>Your source is already out of sync (thus before any AviSynth
processing or any encoding). It’s a pain to correct this, but that’s not
the scope of this FAQ.</li>
<li>The audio has a constant delay, and you forgot to add the delay
(either in AviSynth if you imported the audio in AviSynth or in an
encoder if you imported the audio directly in your encoder). As an
example, the demuxed audio stream from a VOB has often a delay. When
demuxing this audio stream with DGIndex, the delay (actually how the
delay should be corrected) is written into the name of the demuxed audio
stream. You can use <a class="reference internal" href="../corefilters/delayaudio.html"><span class="doc">DelayAudio</span></a> to add the delay in AviSynth.</li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vid</span> <span class="o">=</span> <span class="n">MPEG2Source</span><span class="p">(</span><span class="s2">&quot;D:\movie.d2v&quot;</span><span class="p">)</span>
<span class="n">aud</span> <span class="o">=</span> <span class="n">NicAC3Source</span><span class="p">(</span><span class="s2">&quot;D:\movie T01 2_0ch 448Kbps DELAY -218ms.ac3&quot;</span><span class="p">)</span>
<span class="n">AudioDub</span><span class="p">(</span><span class="n">vid</span><span class="p">,</span> <span class="n">aud</span><span class="p">)</span>
<span class="n">DelayAudio</span><span class="p">(</span><span class="o">-</span><span class="mf">0.218</span><span class="p">)</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li>The audio has a variable delay (with a zero delay at the beginning and
a maximal delay at the end). This can be caused when you load a clip into
AviSynth which has a variable framerate. Pretty much anything except
video contained in an AVI or MPEG-2/VOB file can be variable framerate.
If you used <a class="reference external" href="http://avisynth.org/mediawiki/DirectShowSource">DirectShowSource</a> the load your clip, you can use the
following to ensure sync. What happens is that frames are added or
removed to ensure sync, thus converting it to a constant framerate video.</li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># a mkv-file is used here as an example:</span>
<span class="n">DirectShowSource</span><span class="p">(</span><span class="s2">&quot;D:\movie.mkv&quot;</span><span class="p">,</span> <span class="n">fps</span><span class="o">=</span><span class="n">xxx</span><span class="p">,</span> <span class="n">convertfps</span><span class="o">=</span><span class="n">true</span><span class="p">)</span> <span class="c1"># fps = average framerate</span>
</pre></div>
</div>
<p>If you are not using DirectShowSource or you don’t want to add or remove
frames, you need to create a timecodes file first and use it later on in your
final encoding. Have a look at <a class="reference internal" href="../advancedtopics/hybrid_video.html"><span class="doc">this article</span></a> for more information on this
subject.</p>
</div>
<div class="section" id="how-do-i-recognize-progressive-interlaced-telecined-hybrid-and-blended-content">
<h2><a class="toc-backref" href="#id3">How do I recognize progressive, interlaced, telecined, hybrid and blended content?</a><a class="headerlink" href="#how-do-i-recognize-progressive-interlaced-telecined-hybrid-and-blended-content" title="Permalink to this headline">¶</a></h2>
<p>It is important to know your content if you want to process it. The most
important ones are: progressive, interlaced, telecined, hybrid and blended
content, and they should be processed differently.</p>
<ul class="simple">
<li><strong>Progressive and interlaced content:</strong></li>
</ul>
<div class="line-block">
<div class="line">Most filters assume that your content is progressive (which means that every
frame is taken at a different time-instant), unless the filter has an option
interlaced=true/false. When the option is present you can use interlaced=true
for interlaced content. For interlaced content, every field (a frame consists
of two fields) is taken at a different time-instant. This is explained in the
<a class="reference external" href="http://www.doom9.org/index.html?/capture/introduction.html">Analog Capture Guide</a> and the <a class="reference external" href="http://www.doom9.org/ivtc-tut.htm">Force Film, IVTC, and Deinterlacing</a>
tutorial.</div>
</div>
<ul class="simple">
<li><strong>Telecined content:</strong></li>
</ul>
<div class="line-block">
<div class="line">Usually movies are shot at 24 fps (frames per second). When putting this on a
dvd, fields are added to get the required frame rate of 30 fps (well, it’s
actually 29.97 fps, but that’s not important here). When doing this, the
content is called “telecined content” (this holds for the conversions 25 fps
-&gt; 30 fps and 24 fps -&gt; 25 fps as well, provided fields are added). More
about this can be found in the <a class="reference external" href="http://www.doom9.org/ivtc-tut.htm">Force Film, IVTC, and Deinterlacing</a>
tutorial.</div>
</div>
<ul class="simple">
<li><strong>Hybrid content:</strong></li>
</ul>
<div class="line-block">
<div class="line">Hybrid content is content with different base frame rates (for example 8, 12,
and 16 fps at which anime is often drawn). Start Trek is a different example
consisting of telecined (at 30 fps) and interlaced content (at 30 fps).  Have
a look at <a class="reference internal" href="../advancedtopics/hybrid_video.html"><span class="doc">this article</span></a> for more information on this subject.</div>
</div>
<ul class="simple">
<li><strong>Blended content:</strong></li>
</ul>
<div class="line-block">
<div class="line">Blended content is content which consists of blended fields (in some fields
there is content from different time-instants visible). It’s usually the
result of bad NTSC to PAL conversions (and vice-versa), or messed-up
deinterlacing. Some examples can be found <a class="reference external" href="http://www.doom9.org/index.html?/capture/postprocessing_avisynth.html">in these guides</a> <a class="reference external" href="http://www.doom9.org/ivtc-tut.htm">on Doom9</a>.</div>
</div>
</div>
<div class="section" id="how-do-i-process-interlaced-content">
<h2><a class="toc-backref" href="#id4">How do I process interlaced content?</a><a class="headerlink" href="#how-do-i-process-interlaced-content" title="Permalink to this headline">¶</a></h2>
<p>There are two ways to process your interlaced content (assuming that you use
a filter which has no interlaced=true option). The first one is the most
accurate, but also the slowest: bobbing, processing and reinterlacing. The
second one is the fastest, but also less accurate one: processing the fields
separately.</p>
<ol class="arabic simple">
<li>bobbing:</li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AssumeTFF</span><span class="p">()</span> <span class="c1"># or AssumeBFF (set the video&#39;s field order correctly)</span>
<span class="n">TDeint</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span> <span class="c1"># or any other smart Bob</span>
<span class="n">Filter</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="n">AssumeTFF</span><span class="p">()</span> <span class="c1"># or AssumeBFF (set the video&#39;s field order correctly)</span>
<span class="n">Separatefields</span><span class="p">()</span>
<span class="n">Selectevery</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
<span class="n">Weave</span><span class="p">()</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li>processing the fields separately:</li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SeparateFields</span><span class="p">()</span>
<span class="n">even</span> <span class="o">=</span> <span class="n">SelectEven</span><span class="p">(</span><span class="n">last</span><span class="p">)</span><span class="o">.</span><span class="n">Filter</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="n">odd</span> <span class="o">=</span> <span class="n">SelectOdd</span><span class="p">(</span><span class="n">last</span><span class="p">)</span><span class="o">.</span><span class="n">Filter</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="n">Interleave</span><span class="p">(</span><span class="n">even</span><span class="p">,</span> <span class="n">odd</span><span class="p">)</span>
<span class="n">Weave</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="how-do-i-process-telecined-content">
<h2><a class="toc-backref" href="#id5">How do I process telecined content?</a><a class="headerlink" href="#how-do-i-process-telecined-content" title="Permalink to this headline">¶</a></h2>
<p>You need to inverse telecine (IVTC) before you do any processing. You can use
the plugin Decomb for example, <a class="reference external" href="http://neuron2.net/decomb/decombnew.html">which can be downloaded here</a>. See the
tutorials “<a class="reference external" href="http://www.doom9.org/ivtc-tut.htm">Force Film, IVTC, and Deinterlacing - what is DVD2AVI trying to
tell you and what can you do about it.</a>” or “<a class="reference external" href="http://www.doom9.org/index.html?/capture/postprocessing_avisynth.html">the analog capture guide</a>”
which explain how to do this.</p>
</div>
<div class="section" id="how-do-i-process-hybrid-content">
<h2><a class="toc-backref" href="#id6">How do I process hybrid content?</a><a class="headerlink" href="#how-do-i-process-hybrid-content" title="Permalink to this headline">¶</a></h2>
<p>You only run into troubles when your clip as openend in AviSynth shows
combing (being partly interlaced, telecined, etc …). I’m not sure yet what
to do in that case.</p>
</div>
<div class="section" id="what-is-variable-framerate-video">
<h2><a class="toc-backref" href="#id7">What is variable framerate video?</a><a class="headerlink" href="#what-is-variable-framerate-video" title="Permalink to this headline">¶</a></h2>
<p>There are two kinds of video when considering framerate, constant framerate
(cfr) video and variable framerate (vfr) video. For cfr video the frames have
a constant duration, and for vfr video the frames have a non-constant
duration. Many editing programs (including VirtualDub and AviSynth) assume
that the video is cfr, partly because avi doesn’t support vfr. Although the
avi container doesn’t support vfr, there are several containers (mkv, mp4 and
wmv/asf for example) which do support vfr. More information can be found
<a class="reference internal" href="../advancedtopics/hybrid_video.html"><span class="doc">here</span></a>.</p>
</div>
<div class="section" id="how-do-i-import-variable-framerate-video-into-avisynth-and-how-do-i-process-it">
<h2><a class="toc-backref" href="#id8">How do I import variable framerate video into AviSynth and how do I process it?</a><a class="headerlink" href="#how-do-i-import-variable-framerate-video-into-avisynth-and-how-do-i-process-it" title="Permalink to this headline">¶</a></h2>
<p>There are two ways to import variable framerate video into AviSynth:</p>
<ol class="arabic simple">
<li>Open the video in AviSynth using for example DirectShowSource(…,
convertfps=false) or FFmpegSource. The problem is that in those cases no
frames are added or removed to convert it to constant framerate video to
ensure sync.</li>
</ol>
<p>Generate a timecode file using some external program or using the AviSynth
plugin you use for importing the video into AviSynth (if possible). Many non-
AVI files contain video with a variable framerate, and in that case you need
to make sure of the following two things:</p>
<blockquote>
<div><p>1.  <em>Don’t change the framerate and the number of frames in
AviSynth.</em> If you don’t this (and you don’t change the timecodes file
manually) your video and audio in your final encoding will be out of
sync.</p>
<p>2.  <em>Use the timecodes file again when muxing your encoded video and
audio.</em> If you don’t do this your video and audio in your final encoding
will be out of sync.</p>
</div></blockquote>
<ol class="arabic simple" start="2">
<li>Open the video in AviSynth using for example DirectShowSource(…,
convertfps=true). In this case frames are added or removed to convert it
to constant framerate video to ensure sync. You can process the video the
way you want. You can even create a new timecodes file and create a new
variable framerate video using it. More information can be found <a class="reference internal" href="../advancedtopics/hybrid_video.html"><span class="doc">here</span></a>.</li>
</ol>
<p>Regarding the first way. If you did change the framerate or the number of
frames, you can use DeDup to recreate a new timecode file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dedup_dedup</span><span class="p">(</span><span class="n">threshold</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">maxcopies</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">maxdrops</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">log</span><span class="o">=</span><span class="s2">&quot;01.log&quot;</span><span class="p">,</span> <span class="n">timesin</span><span class="o">=</span><span class="s2">&quot;original.tmc&quot;</span><span class="p">,</span> <span class="n">times</span><span class="o">=</span><span class="s2">&quot;final.tmc&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The parameter “timesin” specifies the timecode file of the original video on
which the output file will be based on (rather than just using the input
stream’s framerate). I never used it, so I’m not sure how good this is. Look
<a class="reference external" href="http://forum.doom9.org/showthread.php?t=121593">here for a discussion</a>.</p>
<div class="line-block">
<div class="line"><a class="reference internal" href="faq_sections.html"><span class="doc">Main Page</span></a> | <a class="reference internal" href="faq_general_info.html"><span class="doc">General Info</span></a> | <a class="reference internal" href="faq_loading_clips.html"><span class="doc">Loading Clips</span></a> | <a class="reference internal" href="faq_frameserving.html"><span class="doc">Loading Scripts</span></a> | <a class="reference internal" href="faq_common_errors.html"><span class="doc">Common Error Messages</span></a> | <strong>Processing Different Content</strong> | <a class="reference internal" href="faq_yv12.html"><span class="doc">Dealing with YV12</span></a> | <a class="reference internal" href="faq_using_virtualdub_plugins.html"><span class="doc">Processing with Virtualdub Plugins</span></a> |</div>
</div>
<p>$Date: 2008/07/02 18:57:42 $</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="faq_frameserving.html" title="AviSynth FAQ - Opening scripts in encoder and player applications"
             >next</a> |</li>
        <li class="right" >
          <a href="faq_common_errors.html" title="AviSynth FAQ - Some common error messages"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">AviSynth+ 3.4 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Invisible Tree</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2000-2019, AviSynth and AviSynth+ contributors.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.5.
    </div>
  </body>
</html>