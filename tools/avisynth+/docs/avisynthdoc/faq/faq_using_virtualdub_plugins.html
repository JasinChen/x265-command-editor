

<!doctype html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>AviSynth FAQ - Using VirtualDub plugins in AviSynth &#8212; AviSynth+ 3.4 documentation</title>
    <link rel="stylesheet" href="../../_static/bizstyle.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/bizstyle.js"></script>
    <link rel="shortcut icon" href="../../_static/AvsiDoc.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="AviSynth FAQ - The color format YV12 and related processing and encoding issues" href="faq_yv12.html" />
    <link rel="prev" title="AviSynth Frequently Asked Questions" href="faq_sections.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <!--[if lt IE 9]>
    <script type="text/javascript" src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="faq_yv12.html" title="AviSynth FAQ - The color format YV12 and related processing and encoding issues"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="faq_sections.html" title="AviSynth Frequently Asked Questions"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">AviSynth+ 3.4 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" accesskey="U">Invisible Tree</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/DocIcon-Large.svg" alt="Logo"/>
            </a></p>
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">AviSynth FAQ - Using VirtualDub plugins in AviSynth</a><ul>
<li><a class="reference internal" href="#where-can-i-download-the-latest-version-of-scripts-which-import-filters-from-virtualdub">Where can I download the latest version of scripts which import filters from VirtualDub?</a></li>
<li><a class="reference internal" href="#which-filters-can-be-imported">Which filters can be imported?</a></li>
<li><a class="reference internal" href="#do-these-scripts-work-in-rgb-space-or-in-yuv-space">Do these scripts work in RGB-space or in YUV-space?</a></li>
<li><a class="reference internal" href="#how-do-i-make-such-a-script">How do I make such a script?</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="faq_sections.html"
                        title="previous chapter">AviSynth Frequently Asked Questions</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="faq_yv12.html"
                        title="next chapter">AviSynth FAQ - The color format YV12 and related processing and encoding issues</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/avisynthdoc/faq/faq_using_virtualdub_plugins.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="avisynth-faq-using-virtualdub-plugins-in-avisynth">
<h1><a class="toc-backref" href="#id2">AviSynth FAQ - Using VirtualDub plugins in AviSynth</a><a class="headerlink" href="#avisynth-faq-using-virtualdub-plugins-in-avisynth" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
</div>
<div class="contents topic" id="table-of-contents">
<p class="topic-title first">Table of contents</p>
<ul class="simple">
<li><a class="reference internal" href="#avisynth-faq-using-virtualdub-plugins-in-avisynth" id="id2">AviSynth FAQ - Using VirtualDub plugins in AviSynth</a><ul>
<li><a class="reference internal" href="#where-can-i-download-the-latest-version-of-scripts-which-import-filters-from-virtualdub" id="id3">Where can I download the latest version of scripts which import filters from VirtualDub?</a></li>
<li><a class="reference internal" href="#which-filters-can-be-imported" id="id4">Which filters can be imported?</a></li>
<li><a class="reference internal" href="#do-these-scripts-work-in-rgb-space-or-in-yuv-space" id="id5">Do these scripts work in RGB-space or in YUV-space?</a></li>
<li><a class="reference internal" href="#how-do-i-make-such-a-script" id="id6">How do I make such a script?</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="where-can-i-download-the-latest-version-of-scripts-which-import-filters-from-virtualdub">
<h2><a class="toc-backref" href="#id3">Where can I download the latest version of scripts which import filters from VirtualDub?</a><a class="headerlink" href="#where-can-i-download-the-latest-version-of-scripts-which-import-filters-from-virtualdub" title="Permalink to this headline">¶</a></h2>
<p>The AviSynth scripts are on the <a class="reference external" href="http://avisynth.org/mediawiki/Shared_functions">Shared_functions</a> page, or you can download
a package called vdub_filtersv15.zip from <a class="reference external" href="http://neuron2.net/hosted.html(http://neuron2.net/hosted.html)">[1]</a>.</p>
</div>
<div class="section" id="which-filters-can-be-imported">
<h2><a class="toc-backref" href="#id4">Which filters can be imported?</a><a class="headerlink" href="#which-filters-can-be-imported" title="Permalink to this headline">¶</a></h2>
<p>Most filters. Read the corresponding documentation.</p>
</div>
<div class="section" id="do-these-scripts-work-in-rgb-space-or-in-yuv-space">
<h2><a class="toc-backref" href="#id5">Do these scripts work in RGB-space or in YUV-space?</a><a class="headerlink" href="#do-these-scripts-work-in-rgb-space-or-in-yuv-space" title="Permalink to this headline">¶</a></h2>
<p>You need to convert your clip to RGB32 before applying these scripts.</p>
</div>
<div class="section" id="how-do-i-make-such-a-script">
<h2><a class="toc-backref" href="#id6">How do I make such a script?</a><a class="headerlink" href="#how-do-i-make-such-a-script" title="Permalink to this headline">¶</a></h2>
<p>Take a look at the following example script (this VirtualDub filter can be
downloaded from <a class="reference external" href="http://neuron2.net/bob.html">Donald’s homepage</a>):</p>
<p>Smart Bob by Donald Graft:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>function VD_SmartBob(clip clip, bool show_motion, int threshold, bool
                     motion_map_denoising)
{
  LoadVirtualdubPlugin(&quot;d:\bob.vdf&quot;, &quot;_VD_SmartBob&quot;, 1)
  return clip.SeparateFields._VD_SmartBob(clip.GetParity?1:0,
    \  default(show_motion,false)?1:0, default(threshold,10),
    \  default(motion_map_denoising,true)?1:0)
}
</pre></div>
</div>
<p>The VirtualDub plugin is imported with the command “LoadVirtualdubPlugin”.
The first argument gives the path of the plugin, the second argument the name
for the plugin that will be used in the script and the third argument is
called the preroll.</p>
<p>The preroll should be set to at least the number of frames the filter needs
to pre-process to fill its buffers and/or updates its internal variables.
This last argument is used in some filters like: SmartBob, SmartDeinterlace,
TemporalCleaner and others. The reason is that due to filtering architecture
of VirtualDub the future frames can’t be accessed by a filter. Dividee
reports: “In the “Add filter” dialog of VirtualDub, some filters have a
“Lag:” value in their description. I think this is the value that must be
used as preroll. Unfortunately, this indication is not always present. In
those cases you have to guess.” Of course you can always ask the creator of
the filter.</p>
<p>The first step is to find out the sequence of the arguments in the last line
where the clip is returned. Configure the script in VirtualDub and select
“Save processing Settings” in the File Menu or press Ctrl+S. Open the created
.vcf file with a text editor and you should see lines like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">VirtualDub</span><span class="o">.</span><span class="n">video</span><span class="o">.</span><span class="n">filters</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="s2">&quot;smart bob (1.1 beta 2)&quot;</span><span class="p">);</span>
<span class="n">VirtualDub</span><span class="o">.</span><span class="n">video</span><span class="o">.</span><span class="n">filters</span><span class="o">.</span><span class="n">instance</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">Config</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
</pre></div>
</div>
<p>The order of the arguments is the one that has to be used in AviSynth. To
find the role of the arguments, play with them in VirtualDub and examine the
resulting lines.</p>
<p>The second step is to test the filter and to compare it with the VirtualDub
filter itself. For the programming itself you can learn a lot by looking at
the script which are already contained in vdub_filters.avs.</p>
<p>Example script which uses the function VD_SmartBob:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Import</span><span class="p">(</span><span class="s2">&quot;d:</span><span class="se">\v</span><span class="s2">dub_filters.avs&quot;</span><span class="p">)</span>
<span class="n">AviSource</span><span class="p">(</span><span class="s2">&quot;d:</span><span class="se">\f</span><span class="s2">ilename.avi&quot;</span><span class="p">)</span>
<span class="n">ConvertToRGB32</span><span class="p">()</span>  <span class="c1"># only when necessary (but doesn&#39;t hurt)</span>
<span class="n">VD_SmartBob</span><span class="p">(</span><span class="n">false</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">true</span><span class="p">)</span>
<span class="n">ConvertBackToYUY2</span><span class="p">()</span>  <span class="c1"># only when necessary</span>
</pre></div>
</div>
<p>The package vdub_filtersv15.zip is a bit outdated since many new VirtualDub
filters are not in it. If that’s the case for your VirtualDub filter and you
don’t want to create a function yourself (such as VD_SmartBob), could also
use the following script:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">LoadVirtualdubplugin</span><span class="p">(</span><span class="s2">&quot;d:</span><span class="se">\b</span><span class="s2">ob.vdf&quot;</span><span class="p">,</span> <span class="s2">&quot;VD_SmartBob&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">VD_SmartBob</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="c1"># parameters taken from the .vcf file</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><a class="reference internal" href="faq_sections.html"><span class="doc">Main Page</span></a> | <a class="reference internal" href="faq_general_info.html"><span class="doc">General Info</span></a> | <a class="reference internal" href="faq_loading_clips.html"><span class="doc">Loading Clips</span></a> | <a class="reference internal" href="faq_frameserving.html"><span class="doc">Loading Scripts</span></a> | <a class="reference internal" href="faq_common_errors.html"><span class="doc">Common Error Messages</span></a> | <a class="reference internal" href="faq_different_types_content.html"><span class="doc">Processing Different Content</span></a> | <a class="reference internal" href="faq_yv12.html"><span class="doc">Dealing with YV12</span></a> | <strong>Processing with Virtualdub Plugins</strong> |</div>
</div>
<p>$Date: 2009/09/12 20:57:20 $</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="faq_yv12.html" title="AviSynth FAQ - The color format YV12 and related processing and encoding issues"
             >next</a> |</li>
        <li class="right" >
          <a href="faq_sections.html" title="AviSynth Frequently Asked Questions"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">AviSynth+ 3.4 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Invisible Tree</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2000-2019, AviSynth and AviSynth+ contributors.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.5.
    </div>
  </body>
</html>