

<!doctype html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>The script execution model - Sequence of events &#8212; AviSynth+ 3.4 documentation</title>
    <link rel="stylesheet" href="../../_static/bizstyle.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/bizstyle.js"></script>
    <link rel="shortcut icon" href="../../_static/AvsiDoc.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="User functions" href="script_ref_user_functions.html" />
    <link rel="prev" title="The script execution model - Performance considerations" href="script_ref_execution_model_perf_cons.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <!--[if lt IE 9]>
    <script type="text/javascript" src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="script_ref_user_functions.html" title="User functions"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="script_ref_execution_model_perf_cons.html" title="The script execution model - Performance considerations"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">AviSynth+ 3.4 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" accesskey="U">Invisible Tree</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/DocIcon-Large.svg" alt="Logo"/>
            </a></p>
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">The script execution model - Sequence of events</a><ul>
<li><a class="reference internal" href="#the-initialisation-phase">The initialisation phase</a></li>
<li><a class="reference internal" href="#the-script-loading-and-parsing-phase">The script loading and parsing phase</a></li>
<li><a class="reference internal" href="#the-video-frames-serving-phase">The video frames serving phase</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="script_ref_execution_model_perf_cons.html"
                        title="previous chapter">The script execution model - Performance considerations</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="script_ref_user_functions.html"
                        title="next chapter">User functions</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/avisynthdoc/script_ref/script_ref_execution_model_sequence_events.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="the-script-execution-model-sequence-of-events">
<h1><a class="toc-backref" href="#id1">The script execution model - Sequence of events</a><a class="headerlink" href="#the-script-execution-model-sequence-of-events" title="Permalink to this headline">¶</a></h1>
<p>The sequence of events that occur when you execute (ie load and render to
your favorite encoder) an AviSynth script is presented below.</p>
<p>The sequence is conceptually divided in three major phases:</p>
<div class="toctree-wrapper compound">
</div>
<div class="contents topic" id="table-of-contents">
<p class="topic-title first">Table of contents</p>
<ul class="simple">
<li><a class="reference internal" href="#the-script-execution-model-sequence-of-events" id="id1">The script execution model - Sequence of events</a><ul>
<li><a class="reference internal" href="#the-initialisation-phase" id="id2">The initialisation phase</a></li>
<li><a class="reference internal" href="#the-script-loading-and-parsing-phase" id="id3">The script loading and parsing phase</a></li>
<li><a class="reference internal" href="#the-video-frames-serving-phase" id="id4">The video frames serving phase</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="the-initialisation-phase">
<h2><a class="toc-backref" href="#id2">The initialisation phase</a><a class="headerlink" href="#the-initialisation-phase" title="Permalink to this headline">¶</a></h2>
<p>During this phase the following events occur:</p>
<ul class="simple">
<li>An AVI stream object is created by the operating system, using the
handler code provided by AviSynth.</li>
<li>AviSynth dll is loaded and performs (among other initialization
actions) auto-loading of the following files that are placed in the
AviSynth autoload folder:<ul>
<li>All AviSynth plugins (files with <code class="docutils literal notranslate"><span class="pre">.dll</span></code> extension).</li>
<li>All AviSynth include scripts (files with <code class="docutils literal notranslate"><span class="pre">.avsi</span></code> extension).</li>
</ul>
</li>
</ul>
<p>During auto-loading:</p>
<ul class="simple">
<li>The plugin and script functions are registered in the internal data
structures of AviSynth; all plugins are unloaded after this phase. Only
if a function is actually used inside the script, the plugin is loaded
again.</li>
<li>Avisynth include scripts are parsed (executed), as if they where all
included in the top of the script source code with <a class="reference internal" href="../corefilters/import.html"><span class="doc">Import</span></a> statements.</li>
</ul>
</div>
<div class="section" id="the-script-loading-and-parsing-phase">
<h2><a class="toc-backref" href="#id3">The script loading and parsing phase</a><a class="headerlink" href="#the-script-loading-and-parsing-phase" title="Permalink to this headline">¶</a></h2>
<p>During this phase the following events occur:</p>
<ul class="simple">
<li>The host video application (the editor or the encoder) requests a
frame from the AVI stream object (usually frame 0, but you should not
count on this always being true).</li>
<li>The script is loaded with a call to the Import <a class="reference internal" href="../syntax/syntax_internal_functions.html"><span class="doc">internal function</span></a>
and its contents are passed to the Eval() <a class="reference internal" href="../syntax/syntax_internal_functions_control.html"><span class="doc">control function</span></a> for
parsing.</li>
<li>The entire parse process takes place. <a class="reference internal" href="../syntax/syntax_ref.html"><span class="doc">Expressions</span></a> are evaluated,
<a class="reference internal" href="../syntax/syntax_script_variables.html"><span class="doc">variables</span></a> are set and clips are created and chained together to form
the script’s fitler graph (see next section).</li>
<li>At this point, just after the end of the parse process:<ul>
<li>The filter graph has been formed.</li>
<li>Global variables have attained their final (regarding the parsing
phase) values and, along with all functions defined in the script or
imported in the global scope, are available for use and possibly
<strong>modification</strong> by the runtime scripts.</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="the-video-frames-serving-phase">
<h2><a class="toc-backref" href="#id4">The video frames serving phase</a><a class="headerlink" href="#the-video-frames-serving-phase" title="Permalink to this headline">¶</a></h2>
<p>During this phase the following events occur:</p>
<ul class="simple">
<li>The initially requested frame is delivered to the host application.
This forces runtime scripts that are possibly included in the source code
to be parsed (executed) for that frame.</li>
<li>The host video application requests additional frames. Each frame is
delivered, possibly forcing runtime scripts that are in the filter chain
for that frame to be parsed (executed).</li>
</ul>
<p><strong>Note:</strong> since runtime scripts may be anywhere in the filter chain and
frames may be shuffled (AviSynth is an NLE after all!) the statement “for
that frame” should be interpreted as “for that frame of the final clip and
any linked frames of intermediate clips”.</p>
<hr class="docutils" />
<p>Back to the <a class="reference internal" href="script_ref_execution_model.html"><span class="doc">script execution model</span></a>.</p>
<p>$Date: 2010/11/28 18:47:26 $</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="script_ref_user_functions.html" title="User functions"
             >next</a> |</li>
        <li class="right" >
          <a href="script_ref_execution_model_perf_cons.html" title="The script execution model - Performance considerations"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">AviSynth+ 3.4 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Invisible Tree</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2000-2019, AviSynth and AviSynth+ contributors.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.5.
    </div>
  </body>
</html>