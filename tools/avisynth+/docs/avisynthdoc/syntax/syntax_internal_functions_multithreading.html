

<!doctype html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>AviSynth Syntax - Multithreading functions &#8212; AviSynth+ 3.4 documentation</title>
    <link rel="stylesheet" href="../../_static/bizstyle.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/bizstyle.js"></script>
    <link rel="shortcut icon" href="../../_static/AvsiDoc.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="AviSynth Syntax - Numeric functions" href="syntax_internal_functions_numeric.html" />
    <link rel="prev" title="AviSynth Syntax - Conversion functions" href="syntax_internal_functions_conversion.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <!--[if lt IE 9]>
    <script type="text/javascript" src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="syntax_internal_functions_numeric.html" title="AviSynth Syntax - Numeric functions"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="syntax_internal_functions_conversion.html" title="AviSynth Syntax - Conversion functions"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">AviSynth+ 3.4 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" accesskey="U">Invisible Tree</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/DocIcon-Large.svg" alt="Logo"/>
            </a></p>
  <h4>Previous topic</h4>
  <p class="topless"><a href="syntax_internal_functions_conversion.html"
                        title="previous chapter">AviSynth Syntax - Conversion functions</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="syntax_internal_functions_numeric.html"
                        title="next chapter">AviSynth Syntax - Numeric functions</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/avisynthdoc/syntax/syntax_internal_functions_multithreading.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="avisynth-syntax-multithreading-functions">
<h1>AviSynth Syntax - Multithreading functions<a class="headerlink" href="#avisynth-syntax-multithreading-functions" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li>GetMTMode   |   v2.60   |   GetMTMode(threads)</li>
<li>SetMTMode   |   v2.60   |   SetMTMode(mode, threads)</li>
</ul>
<p>These functions enable AviSynth to use more than one thread when processing
filters. This is useful if you have more than one cpu/core or hyperthreading.
This feature is still experimental.</p>
<p>GetMTMode(bool threads):</p>
<p>If <em>threads</em> is set to true GetMTMode returns the number of threads used else
the current mode is returned (see below). Default value false.</p>
<p>SetMTMode(int mode, int threads):</p>
<p>Place this at the first line in the avs file to enable temporal (that is more
than one frame is processed at the same time) multithreading. Use it later in
the script to change the mode for the filters below it.</p>
<p><em>mode</em>: There are 6 modes 1 to 6. Default value 2.</p>
<ul class="simple">
<li>Mode 1 is the fastest but only works with a few filter.</li>
<li>Mode 2 should work with most filters but uses more memory.</li>
<li>Mode 3 should work with some of the filters that doesn’t work with
mode 2 but is slower.</li>
<li>Mode 4 is a combination of mode 2 and 3 and should work with even
more filter but is both slower and uses more memory</li>
<li>Mode 5 is slowest but should work with all filters that doesn’t
require linear frameserving (that is the frames come in order (frame
0,1,2 … last).</li>
<li>Mode 6 is a modified mode 5 that might be slightly faster.</li>
</ul>
<p><em>threads</em>: Number of threads to use. Set to 0 to set it to the number of
processors available. It is not possible to change the number of threads
other than in the first SetMTMode. Default value 0.</p>
<p><strong>Example:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SetMTMode</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>                      <span class="c1"># enables multithreading using thread = to</span>
                                    <span class="c1"># the number of available processors and mode 2</span>
<span class="n">LoadPlugin</span><span class="p">(</span><span class="s2">&quot;...\LoadPluginEX.dll&quot;</span><span class="p">)</span>  <span class="c1"># needed to load avisynth 2.0 plugins</span>
<span class="n">LoadPlugin</span><span class="p">(</span><span class="s2">&quot;...\DustV5.dll&quot;</span><span class="p">)</span>        <span class="c1"># Loads Pixiedust</span>
<span class="n">Import</span><span class="p">(</span><span class="s2">&quot;limitedsharpen.avs&quot;</span><span class="p">)</span>
<span class="n">src</span> <span class="o">=</span> <span class="n">AviSource</span><span class="p">(</span><span class="s2">&quot;test.avi&quot;</span><span class="p">)</span>
<span class="n">SetMTMode</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>                        <span class="c1"># change the mode to 5 for the lines below</span>
<span class="n">src</span> <span class="o">=</span> <span class="n">src</span><span class="o">.</span><span class="n">ConvertToYUY2</span><span class="o">.</span><span class="n">PixieDust</span><span class="p">()</span> <span class="c1"># Pixiedust needs mode 5 to function.</span>
<span class="n">SetMTMode</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>                        <span class="c1"># change the mode back to 2</span>
<span class="n">src</span><span class="o">.</span><span class="n">LimitedSharpen</span><span class="p">()</span>                <span class="c1"># because LimitedSharpen works well with mode 2</span>
<span class="c1"># display mode and number of threads in use</span>
<span class="n">Subtitle</span><span class="p">(</span><span class="s2">&quot;Number of threads used: &quot;</span> <span class="o">+</span> <span class="n">String</span><span class="p">(</span><span class="n">GetMTMode</span><span class="p">(</span><span class="n">true</span><span class="p">))</span>
 \ <span class="o">+</span> <span class="s2">&quot; Current MT Mode: &quot;</span> <span class="o">+</span> <span class="n">String</span><span class="p">(</span><span class="n">GetMTMode</span><span class="p">()))</span>
</pre></div>
</div>
<hr class="docutils" />
<p>Back to <a class="reference internal" href="syntax_internal_functions.html"><span class="doc">Internal functions</span></a>.</p>
<p>$Date: 2011/04/29 20:11:14 $</p>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="syntax_internal_functions_numeric.html" title="AviSynth Syntax - Numeric functions"
             >next</a> |</li>
        <li class="right" >
          <a href="syntax_internal_functions_conversion.html" title="AviSynth Syntax - Conversion functions"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">AviSynth+ 3.4 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Invisible Tree</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2000-2019, AviSynth and AviSynth+ contributors.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.5.
    </div>
  </body>
</html>