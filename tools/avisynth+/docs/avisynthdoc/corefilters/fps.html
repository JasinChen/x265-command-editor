

<!doctype html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>FPS &#8212; AviSynth+ 3.4 documentation</title>
    <link rel="stylesheet" href="../../_static/bizstyle.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/bizstyle.js"></script>
    <link rel="shortcut icon" href="../../_static/AvsiDoc.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="FreezeFrame" href="freezeframe.html" />
    <link rel="prev" title="FlipHorizontal / FlipVertical" href="flip.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <!--[if lt IE 9]>
    <script type="text/javascript" src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="freezeframe.html" title="FreezeFrame"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="flip.html" title="FlipHorizontal / FlipVertical"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">AviSynth+ 3.4 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" accesskey="U">Invisible Tree</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/DocIcon-Large.svg" alt="Logo"/>
            </a></p>
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">FPS</a><ul>
<li><a class="reference internal" href="#assumefps">AssumeFPS</a></li>
<li><a class="reference internal" href="#assumescaledfps">AssumeScaledFPS</a></li>
<li><a class="reference internal" href="#changefps">ChangeFPS</a></li>
<li><a class="reference internal" href="#convertfps">ConvertFPS</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="flip.html"
                        title="previous chapter">FlipHorizontal / FlipVertical</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="freezeframe.html"
                        title="next chapter">FreezeFrame</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/avisynthdoc/corefilters/fps.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="fps">
<h1><a class="toc-backref" href="#id4">FPS</a><a class="headerlink" href="#fps" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
</div>
<div class="contents topic" id="table-of-contents">
<p class="topic-title first">Table of contents</p>
<ul class="simple">
<li><a class="reference internal" href="#fps" id="id4">FPS</a><ul>
<li><a class="reference internal" href="#assumefps" id="id5">AssumeFPS</a></li>
<li><a class="reference internal" href="#assumescaledfps" id="id6">AssumeScaledFPS</a></li>
<li><a class="reference internal" href="#changefps" id="id7">ChangeFPS</a></li>
<li><a class="reference internal" href="#convertfps" id="id8">ConvertFPS</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="assumefps">
<h2><a class="toc-backref" href="#id5">AssumeFPS</a><a class="headerlink" href="#assumefps" title="Permalink to this headline">¶</a></h2>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">AssumeFPS</span></code> (clip, float fps, bool “sync_audio”)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">AssumeFPS</span></code> (clip, int numerator [, int denominator], bool “sync_audio”)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">AssumeFPS</span></code> (clip1, clip2, bool “sync_audio”)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">AssumeFPS</span></code> (clip, string preset, bool “sync_audio”)</div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">AssumeFPS</span></code> filter changes the frame rate without changing the frame
count (causing the video to play faster or slower). It only sets the
framerate-parameter
If sync_audio is true, it also changes the audio sample rate by the same
ratio, the pitch of the resulting audio gets shifted.</p>
<p>This is also a method to change only the sample rate of the audio alone.</p>
<p>In <em>v2.55</em>, if clip2 is present, the framerate of clip1 will be adjusted to
match the one of clip2. This is useful when you want to add two clips with
slightly different framerate.</p>
<p>In <em>v2.57</em>, the behaviour with respect to the framerate is a bit changed. The
main issue is that users are allowed to specify the framerate as float, but
the NTSC (FILM and Video) and PAL standards require ratios as framerate.
Besides this AviSynth exports the framerate as a ratio, so when specifying a
float, it will be converted to a ratio. The ratios of the standards are given
by 24000/1001 for 23.976 (FILM) and 30000/1001 for 29.97 (Video). <strong>When
specifying these floats, they are exported by AviSynth as ratios, but not as
the standard ratios.</strong> One of the reasons for this is, that those floats are
approximations (remember that 24000/1001 = 23.9760239760…), so how should
AviSynth know how to choose the correct ratio? In order to overcome this
issue, the user can use AssumeFPS(24000,1001) or simply
AssumeFPS(“ntsc_film”).</p>
<p>Another problem is that the converted floats were (in v2.56 and older)
exported with 64 bit precision, resulting in very large numerators and
denominators, making some players crash. To overcome this, a smart float-ratio
is added internally, and the framerates are approximated accurately by
ratios of small numbers. For example, AssumeFPS(23.976) is converted to
AssumeFPS(2997,125) as can be checked with <a class="reference internal" href="info.html"><span class="doc">Info</span></a>.</p>
<p><strong>Presets:</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="47%" />
<col width="24%" />
<col width="29%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">standard</th>
<th class="head">numerator</th>
<th class="head">denominator</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>“ntsc_film”</td>
<td>24000</td>
<td>1001</td>
</tr>
<tr class="row-odd"><td>“ntsc_video”</td>
<td>30000</td>
<td>1001</td>
</tr>
<tr class="row-even"><td>“ntsc_double”</td>
<td>60000</td>
<td>1001</td>
</tr>
<tr class="row-odd"><td>“ntsc_quad”</td>
<td>120000</td>
<td>1001</td>
</tr>
<tr class="row-even"><td>“ntsc_round_film”</td>
<td>2997</td>
<td>125</td>
</tr>
<tr class="row-odd"><td>“ntsc_round_video”</td>
<td>2997</td>
<td>100</td>
</tr>
<tr class="row-even"><td>“ntsc_round_double”</td>
<td>2997</td>
<td>50</td>
</tr>
<tr class="row-odd"><td>“ntsc_round_quad”</td>
<td>2997</td>
<td>25</td>
</tr>
<tr class="row-even"><td>“film”</td>
<td>24</td>
<td>1</td>
</tr>
<tr class="row-odd"><td>“pal_film”</td>
<td>25</td>
<td>1</td>
</tr>
<tr class="row-even"><td>“pal_video”</td>
<td>25</td>
<td>1</td>
</tr>
<tr class="row-odd"><td>“pal_double”</td>
<td>50</td>
<td>1</td>
</tr>
<tr class="row-even"><td>“pal_quad”</td>
<td>100</td>
<td>1</td>
</tr>
</tbody>
</table>
<p><strong>Examples:</strong></p>
<p>Examples PAL +4% conversion:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AVISource</span><span class="p">(</span><span class="s2">&quot;FILM_clip.avi&quot;</span><span class="p">)</span> <span class="c1"># Get 24fps clip</span>
<span class="n">LanczosResize</span><span class="p">(</span><span class="mi">768</span><span class="p">,</span> <span class="mi">576</span><span class="p">)</span>    <span class="c1"># Resize to PAL square-pixel frame size.</span>
<span class="n">AssumeFPS</span><span class="p">(</span><span class="mi">25</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">true</span><span class="p">)</span>     <span class="c1"># Convert frame rate to PAL, also adjust audio.</span>
<span class="n">SSRC</span><span class="p">(</span><span class="mi">44100</span><span class="p">)</span>                <span class="c1"># Restore audio sample rate to a standard rate.</span>
</pre></div>
</div>
<p>The +4% speed up is conventionally used for displaying 24fps film on PAL
television. The slight increase in pitch and tempo is readily accepted by
viewers of PAL material.</p>
<p>Slowing down of video (framerate of original video is 30 frames a second):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AviSource</span><span class="p">(</span><span class="s2">&quot;video.avi&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">AssumeFPS</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">true</span><span class="p">)</span> <span class="c1"># Slows the video down to a third of its speed</span>
</pre></div>
</div>
<p>Speeding up of video (framerate of original video is 30 frames a second):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AviSource</span><span class="p">(</span><span class="s2">&quot;video.avi&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">AssumeFPS</span><span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="n">true</span><span class="p">)</span> <span class="c1"># Double speed</span>
</pre></div>
</div>
</div>
<div class="section" id="assumescaledfps">
<span id="id1"></span><h2><a class="toc-backref" href="#id6">AssumeScaledFPS</a><a class="headerlink" href="#assumescaledfps" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">AssumeScaledFPS</span></code> (clip, int “multiplier”, int “divisor”, bool “sync_audio”)</p>
<p>The <code class="docutils literal notranslate"><span class="pre">AssumeScaledFPS</span></code> filter scales the frame rate without changing the
frame count. The numerator is multiplied by the multiplier, the denominator
is multiplied by the divisor, the resulting rational FPS fraction is
normalized, if either the resulting numerator or denominator exceed 31 bits
the result is rounded and scaled. This allows exact rational scaling to be
applied to the FPS property of a clip.</p>
<p>If sync_audio is true, it also changes the audio sample rate by the same
ratio, the pitch of the resulting audio gets shifted.</p>
<p>Available in <em>v2.56</em>.</p>
</div>
<div class="section" id="changefps">
<span id="id2"></span><h2><a class="toc-backref" href="#id7">ChangeFPS</a><a class="headerlink" href="#changefps" title="Permalink to this headline">¶</a></h2>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">ChangeFPS</span></code> (clip, float fps, bool “linear”)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">ChangeFPS</span></code> (clip, int numerator [, int denominator], bool “linear”)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">ChangeFPS</span></code> (clip1, clip2, bool “linear”)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">ChangeFPS</span></code> (clip, string preset, bool “linear”)</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">ChangeFPS</span></code> changes the frame rate by deleting or duplicating frames.</p>
<p>Up to <em>v2.05</em>, the video gets truncated or filled up to preserve playback
speed and play time (the number of frames was not changed). In later
versions, the behaviour has been changed and the number of frames is
increased or decreased like in <code class="docutils literal notranslate"><span class="pre">ConvertFPS</span></code>.</p>
<p>In <em>v2.54</em>, an option linear = true/false is added to <code class="docutils literal notranslate"><span class="pre">ChangeFPS</span></code>. This
will make AviSynth request frames in a linear fashion, when skipping frames.
Default is true.</p>
<p>In <em>v2.56</em>, if clip2 is present, the framerate of clip1 will be adjusted to
match that of clip2.</p>
<p>In <em>v2.57</em>, the behaviour with respect to the framerate is a bit changed. See
AssumeFPS.</p>
<p><strong>Examples PAL-&gt;NTSC conversion:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AVISource</span><span class="p">(</span><span class="s2">&quot;PAL_clip.avi&quot;</span><span class="p">)</span>              <span class="c1"># Get clip</span>
<span class="n">Bob</span><span class="p">(</span><span class="n">height</span><span class="o">=</span><span class="mi">480</span><span class="p">)</span>                        <span class="c1"># Separate fields and interpolate them to full height.</span>
<span class="n">BicubicResize</span><span class="p">(</span><span class="mi">640</span><span class="p">,</span><span class="mi">480</span><span class="p">)</span>                 <span class="c1"># Resize to NTSC square-pixel frame size.</span>
<span class="n">ChangeFPS</span><span class="p">(</span><span class="mi">60000</span><span class="p">,</span> <span class="mi">1001</span><span class="p">)</span>                 <span class="c1"># Convert field rate to NTSC, by duplicating fields.</span>
<span class="n">SeparateFields</span><span class="o">.</span><span class="n">SelectEvery</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>      <span class="c1"># Undo Bob, even field first. Use SelectEvery(4,1,2) for odd field first.</span>
<span class="n">Weave</span>                                  <span class="c1"># Finish undoing Bob.</span>
</pre></div>
</div>
<p>The effect is similar to 3-2 telecine pull down. Regular viewers of PAL
material may notice a motion stutter that viewers of NTSC material readily
ignore as for telecined film.</p>
</div>
<div class="section" id="convertfps">
<span id="id3"></span><h2><a class="toc-backref" href="#id8">ConvertFPS</a><a class="headerlink" href="#convertfps" title="Permalink to this headline">¶</a></h2>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">ConvertFPS</span></code> (clip, float new_rate, int “zone”, int “vbi”)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">ConvertFPS</span></code> (clip, int numerator [, int denominator], int “zone”, int “vbi”)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">ConvertFPS</span></code> (clip1, clip2, int “zone”, int “vbi”)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">ConvertFPS</span></code> (clip, string preset, int “zone”, int “vbi”)</div>
</div>
<p>The filter attempts to convert the frame rate of clip to new_rate without
dropping or inserting frames, providing a smooth conversion with results
similar to those of standalone converter boxes. The output will have (almost)
the same duration as <em>clip</em>, but the number of frames will change
proportional to the ratio of target and source frame rates.</p>
<p>In <em>v2.56</em>, if clip2 is present, the framerate of clip1 will be adjusted to
match that of clip2.</p>
<p>In <em>v2.57</em>, the behaviour with respect to the framerate is a bit changed. See
AssumeFPS.</p>
<p>The filter has two operating modes. If the optional argument zone is not
present, it will blend adjacent video frames, weighted by a blend factor
proportional to the frames’ relative timing (“Blend Mode”). If zone is
present, it will switch from one video frame to the next (“Switch Mode”)
whenever a new source frame begins, that is, usually somewhere in the middle
of a target frame. Switch Mode assumes that the output will be shown on a TV
where each frame is scanned from top to bottom. The parameter zone specifies
the height of the transition region in which the current frame will be
blended into the next.</p>
<p>Blend Mode will cause visible, although slight, blurring of motion. This is a
typical artifact of frame rate conversion and can be seen on commercial video
tapes and TV programs as well. When working with interlaced video, it is
important to let the filter operate on individual fields, not on the
interlaced frames. (See examples below.)</p>
<p>Switch Mode is an attempt to avoid motion blurring, but comes at the expense
of slight flicker and motion artifacts. Horizontal and vertical pans may show
a slight wobble. Still frames from this conversion show “broken” or “bent”
vertical lines in moving scenes. Scene transitions may occur in the middle of
a frame. Nevertheless, the results do look less blurry than in “Blend Mode”.</p>
<p>Neither mode is perfect. Which one to choose depends on personal preference
and on the footage to be converted. Switch Mode is probably only suitable if
the output will be shown on a TV, not on a computer screen.</p>
<p>Frame rate conversion is inherently difficult. This filter implements two
common methods used by commercial Prosumer-level converter systems. The
results are typically quite good. More sophisticated systems employ motion
interpolation algorithms, which are difficult to get right, but, if done
right, do yield superior results.</p>
<p>Footage converted with this filter should not be converted again. Blurriness
builds up quickly in subsequent generations.</p>
<p>The audio data are not touched by this filter. Audio will remain
synchronized, although the length of the audio data may slightly differ from
that of the video data after the conversion. This is because the output can
only contain an integer number of frames. This effect will be more pronounced
for shorter clips. The difference in length should be ignored.</p>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="87%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameters</th>
<th class="head">&#160;</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><em>new_rate</em></td>
<td>Target frame rate. Can be integer or floating point number. In
Blend Mode, <em>new_rate</em> must be at least 2/3 (66.7%) of the source frame rate,
or an error will occur. This is to prevent frame skipping. If you need to
slow down the frame rate more than that, use Switch Mode.</td>
</tr>
<tr class="row-odd"><td><em>zone</em></td>
<td>(Optional) If specified, puts the filter into Switch Mode. Integer
number greater or equal to zero. If zero, the filter will perform a hard
switch, that is, it will immediately display the next frame below the switch
line. If greater than zero, specifies the height (in lines) of the transition
zone, where one frame is gradually blended into the next. zone=80 yields good
results for full-size video (480/576 active lines). The transition is done in
the same way as in PeculiarBlend(). <em>zone</em> must be less or equal than the
number of lines of the target frame that correspond to the duration of the
source frame. This is typically 5/6 or 6/5 of the target frame height, that
is, a few hundred lines. An error occurs if a larger value is chosen.</td>
</tr>
<tr class="row-even"><td><em>vbi</em></td>
<td>(Optional) In Switch Mode, specifies that the filter should apply a
timing correction for the vertical blanking interval (VBI). Integer number
greater than zero, indicating the height of the VBI of the target frames, in
lines. Typically vbi=49 for PAL and vbi=45 for NTSC, but these values are not
critical. Ignored in Blend Mode.</td>
</tr>
</tbody>
</table>
<p><strong>Examples NTSC-&gt;PAL conversion:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AVISource</span><span class="p">(</span><span class="s2">&quot;NTSC_clip.avi&quot;</span><span class="p">)</span>             <span class="c1"># Get clip</span>
<span class="n">Bob</span><span class="p">(</span><span class="n">height</span><span class="o">=</span><span class="mi">576</span><span class="p">)</span>                        <span class="c1"># Separate fields and interpolate them to full height.</span>
<span class="n">BicubicResize</span><span class="p">(</span><span class="mi">768</span><span class="p">,</span><span class="mi">576</span><span class="p">)</span>                 <span class="c1"># Resize to PAL square-pixel frame size. (Use 720,576 for CCIR.)</span>
<span class="n">ConvertFPS</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>                         <span class="c1"># Convert field rate to PAL, using Blend Mode.</span>
<span class="n">SeparateFields</span><span class="o">.</span><span class="n">SelectEvery</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>      <span class="c1"># Undo Bob, even field first. Use SelectEvery(4,1,2) for odd field first.</span>
<span class="n">Weave</span>                                  <span class="c1"># Finish undoing Bob.</span>
</pre></div>
</div>
<p>This example will also work with frame-based NTSC material, even with
telecined film (movies). For film material, however, you will get better
results by using an inverse-telecine filter and speeding up the frame rate
from 23.976 to 25fps.</p>
<p>Not all parameter values are checked for sanity.</p>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="87%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Changes</th>
<th class="head">&#160;</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>v2.57</td>
<td>added preset option; changed framerate behaviour;
YV12 and RGB support for ConvertFPS, fixed blending ratio</td>
</tr>
<tr class="row-odd"><td>v2.56</td>
<td>added clip2 option in ChangeFPS, added AssumeScaledFPS</td>
</tr>
<tr class="row-even"><td>v2.55</td>
<td>added clip2 option in AssumeFPS</td>
</tr>
<tr class="row-odd"><td>v2.54</td>
<td>added linear=true/false to ChangeFPS</td>
</tr>
</tbody>
</table>
<p>$Date: 2010/02/27 14:45:27 $</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="freezeframe.html" title="FreezeFrame"
             >next</a> |</li>
        <li class="right" >
          <a href="flip.html" title="FlipHorizontal / FlipVertical"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">AviSynth+ 3.4 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Invisible Tree</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2000-2019, AviSynth and AviSynth+ contributors.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.5.
    </div>
  </body>
</html>