

<!doctype html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>WriteFile / WriteFileIf / WriteFileStart / WriteFileEnd &#8212; AviSynth+ 3.4 documentation</title>
    <link rel="stylesheet" href="../../_static/bizstyle.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/bizstyle.js"></script>
    <link rel="shortcut icon" href="../../_static/AvsiDoc.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Avisynth Frequently Asked Questions" href="../faq/faq.html" />
    <link rel="prev" title="Weave / WeaveColumns / WeaveRows" href="weave.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <!--[if lt IE 9]>
    <script type="text/javascript" src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../faq/faq.html" title="Avisynth Frequently Asked Questions"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="weave.html" title="Weave / WeaveColumns / WeaveRows"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">AviSynth+ 3.4 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" accesskey="U">Invisible Tree</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/DocIcon-Large.svg" alt="Logo"/>
            </a></p>
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">WriteFile / WriteFileIf / WriteFileStart / WriteFileEnd</a><ul>
<li><a class="reference internal" href="#usage-is-best-explained-with-some-simple-examples">Usage is best explained with some simple examples</a></li>
<li><a class="reference internal" href="#there-are-easier-ways-to-write-numbers-in-a-file-but">There are easier ways to write numbers in a file, BUT</a></li>
<li><a class="reference internal" href="#more-examples">More examples</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="weave.html"
                        title="previous chapter">Weave / WeaveColumns / WeaveRows</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../faq/faq.html"
                        title="next chapter">Avisynth Frequently Asked Questions</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/avisynthdoc/corefilters/write.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="writefile-writefileif-writefilestart-writefileend">
<h1>WriteFile / WriteFileIf / WriteFileStart / WriteFileEnd<a class="headerlink" href="#writefile-writefileif-writefilestart-writefileend" title="Permalink to this headline">¶</a></h1>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">WriteFile</span></code> (clip, string filename, <em>string expression1 [, string
expression2 [, …]], bool “append”, bool “flush”</em>)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">WriteFileIf</span></code> (clip, string filename, <em>string expression1 [, string
expression2 [, …]], bool “append”, bool “flush”</em>)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">WriteFileStart</span></code> (clip, string filename, <em>string expression1 [, string
expression2 [, …]], bool “append”</em>)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">WriteFileEnd</span></code> (clip, string filename, <em>string expression1 [, string
expression2 [, …]], bool “append”</em>)</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">WriteFile</span></code> evaluates each expressionN, converts the result to a string and
puts the concatenated results into a file, followed by a newline.</p>
<p>The “run-time” variable current_frame is set so that you can use it in an
“expression”
(this works similar as with ScriptClip, look there in the docu for more
infos).
current_frame is set to -1 when the script is loaded and to -2 when the
script is closed.</p>
<p><code class="docutils literal notranslate"><span class="pre">WriteFile</span></code> evaluates the ‘’expression’’s and generates output for each
frame rendered by the filter. <code class="docutils literal notranslate"><span class="pre">WriteFileIf</span></code> is similar, but generates
output only if the first expression is true. In both cases, there is no
output at script opening or closure. Note that since output is produced only
for ‘’rendered’’ frames, there will be no output at all if the result of the
filter is not used in deriving the final result of the script.</p>
<p><code class="docutils literal notranslate"><span class="pre">WriteFileStart</span></code> and <code class="docutils literal notranslate"><span class="pre">WriteFileEnd</span></code> generate output only on script
opening and closure respectively, there is no action on each frame. In both
cases, the ‘’expression’’s are evaluated exactly once, at the location of the
filter in the script.</p>
<p>When append = true, the result(s) will be appended to any existing file. The
default for append is always true, except for <code class="docutils literal notranslate"><span class="pre">WriteFileStart</span></code> (here it is
false).</p>
<p>When flush = true, the file is closed and reopened after each operation so
you can see the result immediately (this may be slower). The default for
flush (<code class="docutils literal notranslate"><span class="pre">WriteFile</span></code> and <code class="docutils literal notranslate"><span class="pre">WriteFileIf</span></code>) is true. For <code class="docutils literal notranslate"><span class="pre">WriteFileStart</span></code>
and <code class="docutils literal notranslate"><span class="pre">WriteFileEnd</span></code>, the file is always closed immediately after writing.</p>
<div class="section" id="usage-is-best-explained-with-some-simple-examples">
<h2>Usage is best explained with some simple examples<a class="headerlink" href="#usage-is-best-explained-with-some-simple-examples" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">filename</span> <span class="o">=</span> <span class="s2">&quot;c:\myprojects\output.txt&quot;</span>
<span class="c1"># create a test video to get frames</span>
<span class="n">Version</span><span class="p">()</span>

<span class="c1"># the expression here is only a variable, which is evaluated and put in the file</span>
<span class="c1"># you will get a file with the framenumber in each line</span>
<span class="n">WriteFile</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s2">&quot;current_frame&quot;</span><span class="p">)</span>

<span class="c1"># this line is written when the script is opened</span>
<span class="n">WriteFileStart</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s2">&quot;&quot;&quot; &quot;This is the header&quot; &quot;&quot;&quot;</span><span class="p">)</span>

<span class="c1"># and this when the script is closed</span>
<span class="n">WriteFileEnd</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s2">&quot;&quot;&quot; &quot;Now the script was closed&quot; &quot;&quot;&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Look how you can use triple-quotes to type a string in a string!</p>
<p>If the expression cannot be evaluated, the error message is written instead.
In case this happens with the If-expression in <code class="docutils literal notranslate"><span class="pre">WriteFileIf</span></code> the result is
assumed to be <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># will result in &quot;I don&#39;t know what &quot;this&quot; means&quot;</span>
<span class="n">WriteFile</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s2">&quot;this is nonsense&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="there-are-easier-ways-to-write-numbers-in-a-file-but">
<h2>There are easier ways to write numbers in a file, BUT<a class="headerlink" href="#there-are-easier-ways-to-write-numbers-in-a-file-but" title="Permalink to this headline">¶</a></h2>
<p>… with this example you can see how to use the “runtime function”
AverageLuma:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># create a test video to get different frames</span>
<span class="n">Version</span><span class="o">.</span><span class="n">FadeIn</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span><span class="o">.</span><span class="n">ConvertToYV12</span>

<span class="c1"># this will print the frame number, a &quot;:&quot; and the average luma for that frame</span>
<span class="n">colon</span> <span class="o">=</span> <span class="s2">&quot;: &quot;</span>
<span class="n">WriteFile</span><span class="p">(</span><span class="s2">&quot;F:</span><span class="se">\t</span><span class="s2">ext.log&quot;</span><span class="p">,</span> <span class="s2">&quot;current_frame&quot;</span><span class="p">,</span> <span class="s2">&quot;colon&quot;</span><span class="p">,</span> <span class="s2">&quot;AverageLuma&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Or maybe you want the actual time printed too:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># create a test video to get different frames</span>
<span class="n">Version</span><span class="o">.</span><span class="n">FadeIn</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span><span class="o">.</span><span class="n">ConvertToYV12</span>

<span class="c1"># this will print the frame number, the current time and the average luma for that frame</span>
<span class="c1"># the triple quotes are necessary to put quotes inside a string</span>
<span class="n">WriteFile</span><span class="p">(</span><span class="n">last</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="s2">&quot;current_frame&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;&quot; time(&quot; %H:%M:%S&quot;) &quot;&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;AverageLuma&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="more-examples">
<h2>More examples<a class="headerlink" href="#more-examples" title="Permalink to this headline">¶</a></h2>
<p>In <code class="docutils literal notranslate"><span class="pre">WriteFileIf</span></code> the FIRST expression is expected to be boolean (true or
false). Only if it is TRUE the other expressions are evaluated and the line
is printed. (Remember: &amp;&amp; is AND, || is OR, == is EQUAL, != is NOT EQUAL)
That way you can omit lines completely from your file.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># create a test video to get different frames</span>
<span class="n">Version</span><span class="o">.</span><span class="n">FadeIn</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span><span class="o">.</span><span class="n">ConvertToYV12</span>

<span class="c1"># this will print the frame number, but only of frames where AverageLuma is between 30 and 60</span>
<span class="n">WriteFileIf</span><span class="p">(</span><span class="n">last</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="s2">&quot;(AverageLuma&gt;30) &amp;&amp; (AverageLuma&lt;60)&quot;</span><span class="p">,</span> <span class="s2">&quot;current_frame&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;&quot; &quot;:&quot; &quot;&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;AverageLuma&quot;</span><span class="p">)</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="87%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Changes</th>
<th class="head">&#160;</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>v2.60</td>
<td>Number of expressions changed from 16 to nearly unlimited.</td>
</tr>
<tr class="row-odd"><td>v2.55</td>
<td>Initial release.</td>
</tr>
</tbody>
</table>
<p>$Date: 2010/01/06 16:01:28 $</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../faq/faq.html" title="Avisynth Frequently Asked Questions"
             >next</a> |</li>
        <li class="right" >
          <a href="weave.html" title="Weave / WeaveColumns / WeaveRows"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">AviSynth+ 3.4 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Invisible Tree</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2000-2019, AviSynth and AviSynth+ contributors.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.5.
    </div>
  </body>
</html>