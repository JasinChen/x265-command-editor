

<!doctype html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Levels &#8212; AviSynth+ 3.4 documentation</title>
    <link rel="stylesheet" href="../../_static/bizstyle.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/bizstyle.js"></script>
    <link rel="shortcut icon" href="../../_static/AvsiDoc.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Limiter" href="limiter.html" />
    <link rel="prev" title="Letterbox" href="letterbox.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <!--[if lt IE 9]>
    <script type="text/javascript" src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="limiter.html" title="Limiter"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="letterbox.html" title="Letterbox"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">AviSynth+ 3.4 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" accesskey="U">Invisible Tree</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/DocIcon-Large.svg" alt="Logo"/>
            </a></p>
  <h4>Previous topic</h4>
  <p class="topless"><a href="letterbox.html"
                        title="previous chapter">Letterbox</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="limiter.html"
                        title="next chapter">Limiter</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/avisynthdoc/corefilters/levels.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="levels">
<h1>Levels<a class="headerlink" href="#levels" title="Permalink to this headline">¶</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">Levels</span></code> (clip, int input_low, float gamma, int input_high, int output_low,
int output_high, bool “coring”, bool “dither”)</p>
<p>The <code class="docutils literal notranslate"><span class="pre">Levels</span></code> filter adjusts brightness, contrast, and gamma (which must be
&gt; 0). The input_low and input_high parameters determine what input pixel
values are treated as pure black and pure white, the output_low and
output_high parameters determine the output values corresponding to pure
black and white and the gamma parameter controls the degree of nonlinearity
in the conversion. To be precise, the conversion function is:</p>
<p>&gt; output = [(input - input_low) / (input_high - input_low)]1/gamma
(output_high - output_low) + output_low</p>
<p>This is one of those filters for which it would really be nice to have a GUI.
Since I can’t offer a GUI (at least not in AviSynth’s current form), I
decided I could at least make this filter compatible with VirtualDub’s when
the clip is RGB. In that case you should be able to take the numbers from
VirtualDub’s Levels dialog and pass them as parameters to the <code class="docutils literal notranslate"><span class="pre">Levels</span></code>
filter and get the same results. However, the input and output parameters can
be larger than 255.</p>
<p>When processing data in YUV mode, <code class="docutils literal notranslate"><span class="pre">Levels</span></code> only gamma-corrects the luma
information, not the chroma. Gamma correction is really an RGB concept, and I
don’t know how to do it properly in YUV. However, if gamma = 1.0, the filter
should have the same effect in RGB and YUV modes. For adjusting brightness or
contrast it is better to use <a class="reference internal" href="tweak.html"><span class="doc">Tweak</span></a> or <a class="reference internal" href="coloryuv.html"><span class="doc">ColorYUV</span></a>, because <code class="docutils literal notranslate"><span class="pre">Levels</span></code> also
changes the chroma of the clip.</p>
<p>In <em>v2.53</em> an optional coring = true/false (true by default, which reflects
the behaviour in older versions) is added.</p>
<p><em>coring</em> = true/false (true by default): When set to true: input luma is
clamped to [16,235] (and the chroma to [16,240]), this result is <em>scaled</em>
from [16,235] to [0,255], the conversion takes place according to the formula
above, and output is <em>scaled</em> back from [0,255] to [16,235]. When set to
false, the conversion takes place according to the formula above.</p>
<p><em>dither</em> = true/false (false by default): When set to true, <a class="reference external" href="http://avisynth.org/mediawiki/Ordered_dithering">ordered
dithering</a> is applied when doing the adjustment.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># does nothing on a [16,235] clip, but it clamps (or rounds) a [0,255] clip to [16,235]:</span>
<span class="n">Levels</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">)</span>

<span class="c1"># the input is scaled from [16,235] to [0,255],</span>
<span class="c1"># the conversion [0,255]-&gt;[16,235] takes place (accordingly to the formula),</span>
<span class="c1"># and the output is scaled back from [0,255] to [16,235]:</span>
<span class="c1"># (for example: the luma values in [0,16] are all converted to 30)</span>
<span class="n">Levels</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">235</span><span class="p">)</span>

<span class="c1"># gamma-correct image for display in a brighter environment:</span>
<span class="c1"># example: luma of 16 stays 16, 59 is converted to 79, etc.</span>
<span class="n">Levels</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">1.3</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">)</span>

<span class="c1"># invert the image (make a photo-negative):</span>
<span class="c1"># example: luma of 16 is converted to 235</span>
<span class="n">Levels</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

<span class="c1"># does nothing on a [0,255] clip; does nothing on a [16,235]:</span>
<span class="n">Levels</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="n">coring</span><span class="o">=</span><span class="n">false</span><span class="p">)</span>

<span class="c1"># scales a [0,255] clip to [16,235]:</span>
<span class="n">Levels</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">235</span><span class="p">,</span> <span class="n">coring</span><span class="o">=</span><span class="n">false</span><span class="p">)</span>
<span class="c1"># note both luma and chroma components are scaled by the same</span>
<span class="c1"># amount, so it&#39;s not exactly the same as ColorYUV(levels=&quot;PC-&gt;TV&quot;)</span>

<span class="c1"># scales a [16,235] clip to [0,255]:</span>
<span class="n">Levels</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">235</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="n">coring</span><span class="o">=</span><span class="n">false</span><span class="p">)</span>
<span class="c1"># note both luma and chroma components are scaled by the same</span>
<span class="c1"># amount, so it&#39;s not exactly the same as ColorYUV(levels=&quot;TV-&gt;PC&quot;)</span>

<span class="c1"># makes a clip 100% black</span>
<span class="n">Levels</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="39%" />
<col width="61%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Changes</th>
<th class="head">&#160;</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>v2.53</td>
<td>added coring</td>
</tr>
<tr class="row-odd"><td>v2.60</td>
<td>added dither</td>
</tr>
</tbody>
</table>
<p>$Date: 2012/04/09 08:19:32 $</p>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="limiter.html" title="Limiter"
             >next</a> |</li>
        <li class="right" >
          <a href="letterbox.html" title="Letterbox"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">AviSynth+ 3.4 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Invisible Tree</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2000-2019, AviSynth and AviSynth+ contributors.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.5.
    </div>
  </body>
</html>